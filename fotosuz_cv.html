<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fotosuz CV</title>
    <style>
        @page {
            size: A4;
            margin: 20mm;  /* Margin'i küçülttük */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background-color: #f4f6f9;
            color: #333;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-size: 10pt; /* Font boyutunu biraz küçülttük */
            overflow: auto;
            min-height: 100vh;
            min-width: 100vh;
        }

        .container {
            width: 220mm;  /* Daha dar bir alan */
            min-height: 295mm; /* Sayfada sığmasını sağladık */
            padding: 8mm;  /* İçerik boşluklarını daraltık */
            box-sizing: border-box;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            border: 1px solid #ccc;
            align-items: flex-start;
        }

        .header {
            text-align: left;
            margin-bottom: 8px; /* Margin küçültüldü */
            padding-bottom: 4px; /* Padding küçültüldü */
            border-bottom: 1px solid #2C3E50;
            width: 100%;
        }

        .header h1 {
            margin: 0;
            font-family: 'Georgia', serif;
            font-size: 20pt; /* Başlık fontunu küçülttük */
            color: #2C3E50;
        }

        .header p {
            margin: 3px 0; /* Margin küçültüldü */
            font-family: 'Arial', sans-serif;
            font-size: 10pt; /* Font boyutunu küçülttük */
            color: #7F8C8D;
        }

        .section {
            margin-top: 12px;
            margin-bottom: 12px;
        }

        h1, h2 {
            color: #2C3E50; /* Lacivert renk */
        }
        
        .section h2 {
            font-family: 'Arial', sans-serif;
            font-size: 14pt; /* Başlık fontu küçültüldü */
            margin-bottom: 4px;
            text-decoration: underline;
            color: #2C3E50;
        }

        .content-item {
            margin-bottom: 6px; /* Margin küçültüldü */
        }

        .content-item span {
            font-weight: bold;
        }

        .content-item p {
            margin: 0;
            font-family: 'Arial', sans-serif;
            font-size: 10pt; /* Font boyutunu küçülttük */
            color: #555;
        }

        .footer {
            text-align: left;
            margin-top: 15px;
            font-family: 'Arial', sans-serif;
            font-size: 10pt; /* Font boyutu küçültüldü */
            color: #7F8C8D;
        }

        .footer a {
            color: #2C3E50;
            text-decoration: none;
        }

        .section ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .section ul li {
            font-family: 'Arial', sans-serif;
            font-size: 10pt; /* Font boyutu küçültüldü */
            color: #555;
            margin: 0;
        }

        @media print {
            body {
                font-size: 16pt;
                text-align: center;
            }

            .header h1 {
                font-size: 14pt;
                text-align: center;
            }

            .section h2 {
                font-size: 12pt;
            }

            .footer {
                font-size: 10pt;
            }

            .container {
                padding: 10mm;
            }
        }

        .section p {
            white-space: pre-line;
        }

        #download-button {
            padding: 8px 18px;
            background-color: #2980b9;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .content {
            max-width: 800px; /* Max width of the content */
            width: 100%;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1 id="name">Ad Soyad</h1>
            <p id="profession">Unvan: Yazılım Geliştirici</p>
            <p id="contact-info">Telefon: 555-555-5555 | Email: ornek@mail.com | LinkedIn: linkedin.com/in/yourprofile</p>
        </div>

        <div class="section">
            <h2>Kişisel Özet</h2>
            <p id="summary">Kısa bir özgeçmiş yazısı. İş deneyiminizden, yeteneklerinizden ve kariyer hedeflerinizden bahsedin. Bu yazı daha uzun olabilir ve alt satırlara kaymalıdır.</p>
        </div>

        <div class="section">
            <h2>İş Deneyimi</h2>
            <ul id="work-experience">
                <li>İş deneyimi bilgisi bulunmamaktadır.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Eğitim Bilgileri</h2>
            <ul id="education">
                <li>Eğitim bilgisi bulunmamaktadır.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Beceriler</h2>
            <div id="skills" class="content-item">
            </div>
        </div>

        <div class="section">
            <h2>Kurslar ve Sertifikalar</h2>
            <ul id="certifications">
                <li>Sertifikalar bilgisi bulunmamaktadır.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Yabancı Diller</h2>
            <ul id="languages">
                <li>Yabancı dil bilgisi bulunmamaktadır.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Referanslar</h2>
            <ul id="references">
                <li>Referanslar bilgisi bulunmamaktadır.</li>
            </ul>
        </div>
        
    </div>

    <button id="download-button">PDF Olarak İndir</button>

    <button onclick="downloadWord()" style="padding: 10px 20px; background-color: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">
        Word Olarak İndir
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script>
        window.onload = function() {
            const cvData = JSON.parse(localStorage.getItem('cvData'));

            if (cvData) {
                document.getElementById('name').textContent = cvData.name || 'Ad Soyad';
                document.getElementById('profession').textContent = cvData.profession || 'Unvan';
                document.getElementById('contact-info').textContent = `Telefon: ${cvData.phone || 'Telefon yok'} | Email: ${cvData.email || 'E-posta yok'} | LinkedIn: ${cvData.linkedin || 'LinkedIn yok'}`;
                document.getElementById('summary').textContent = cvData.summary || 'Kişisel özet yok';
            
                const workExperience = cvData.workExperience || "";
                if (workExperience) {
                    document.getElementById('work-experience').innerHTML = workExperience.split(',').map(exp => `<li>${exp}</li>`).join('');
                } else {
                    document.getElementById('work-experience').innerHTML = "<li>İş deneyimi bilgisi bulunmamaktadır.</li>";
                }
            
                document.getElementById('education').innerHTML = (cvData.education || "").split(',').map(edu => `<li>${edu}</li>`).join(''); 
            
                const skills = cvData.skills || "";
                const skillsList = skills.split(',').map(skill => `<p>${skill}</p>`).join('');
                document.getElementById('skills').innerHTML = skillsList || "<p>Beceriler bilgisi bulunmamaktadır.</p>";
            
                document.getElementById('certifications').innerHTML = (cvData.certifications || "").split(',').map(cert => `<li>${cert}</li>`).join('');
            
                document.getElementById('languages').innerHTML = (cvData.languages || "").split(',').map(lang => `<li>${lang}</li>`).join('');
            
                document.getElementById('references').innerHTML = (cvData.references || "").split(',').map(ref => `<li>${ref}</li>`).join('');
            }

        }

        document.getElementById('download-button').addEventListener('click', function() {
            const element = document.querySelector('.container');
            const opt = {
                margin: 0.5, // Sayfa kenar boşlukları
                filename: 'CV.pdf', // PDF dosya adı
                image: { type: 'jpeg', quality: 1.0 }, // Yüksek kaliteli görüntü
                html2canvas: { scale: 2 }, // Çözünürlük artırımı
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        });
        

        function downloadWord() {
            const element = document.querySelector('.container');
            const content = element.innerHTML;
        
            // CSS ekleme: h1 sadece renk değişikliği, diğer başlıklar altı çizili
            const style = `
                <style>
                    h1 {
                        color: #2C3E50;
                    }
                    h2, h3, h4, h5, h6 {
                        color: #2C3E50;
                        text-decoration: underline;
                    }
                </style>
            `;
        
            const header = `
                <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                <head>
                    <meta charset='utf-8'>
                    <title>CV</title>
                    ${style}
                </head>
                <body>
            `;
        
            const footer = `
                </body>
                </html>
            `;
        
            const fullHTML = header + content + footer;
        
            // Blob oluşturma
            const blob = new Blob([fullHTML], {
                type: 'application/msword'
            });
        
            // İndirme bağlantısı oluşturma
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'CV.doc';
            document.body.appendChild(a);
            a.click();
        
            // Belleği temizleme
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
    </script>
</body>
</html>
